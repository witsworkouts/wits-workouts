[{"/home/nafis/Desktop/Wellness-In-Schools/client/src/index.js":"1","/home/nafis/Desktop/Wellness-In-Schools/client/src/App.js":"2","/home/nafis/Desktop/Wellness-In-Schools/client/src/components/AdminRoute.js":"3","/home/nafis/Desktop/Wellness-In-Schools/client/src/pages/Home.js":"4","/home/nafis/Desktop/Wellness-In-Schools/client/src/components/Navbar.js":"5","/home/nafis/Desktop/Wellness-In-Schools/client/src/components/PrivateRoute.js":"6","/home/nafis/Desktop/Wellness-In-Schools/client/src/pages/Register.js":"7","/home/nafis/Desktop/Wellness-In-Schools/client/src/pages/Login.js":"8","/home/nafis/Desktop/Wellness-In-Schools/client/src/contexts/VideoContext.js":"9","/home/nafis/Desktop/Wellness-In-Schools/client/src/pages/ResetPassword.js":"10","/home/nafis/Desktop/Wellness-In-Schools/client/src/pages/ForgotPassword.js":"11","/home/nafis/Desktop/Wellness-In-Schools/client/src/pages/VideoPlayer.js":"12","/home/nafis/Desktop/Wellness-In-Schools/client/src/pages/AdminDashboard.js":"13","/home/nafis/Desktop/Wellness-In-Schools/client/src/pages/Profile.js":"14","/home/nafis/Desktop/Wellness-In-Schools/client/src/contexts/AuthContext.js":"15","/home/nafis/Desktop/Wellness-In-Schools/client/src/components/VideoCard.js":"16","/home/nafis/Desktop/Wellness-In-Schools/client/src/components/CategoryTabs.js":"17","/home/nafis/Desktop/Wellness-In-Schools/client/src/components/Leaderboard.js":"18","/home/nafis/Desktop/Wellness-In-Schools/client/src/components/SubcategoryTabs.js":"19","/home/nafis/Desktop/Wellness-In-Schools/client/src/components/ChatBubble.js":"20","/home/nafis/Desktop/Wellness-In-Schools/client/src/pages/PasswordProtection.js":"21","/home/nafis/Desktop/Wellness-In-Schools/client/src/components/PasswordRoute.js":"22","/home/nafis/Desktop/Wellness-In-Schools/client/src/components/PasswordOnlyRoute.js":"23","/home/nafis/Desktop/Wellness-In-Schools/client/src/components/HorizontalVideoGrid.js":"24","/home/nafis/Desktop/Wellness-In-Schools/client/src/components/ScrollingBanner.js":"25","/home/nafis/Desktop/Wellness-In-Schools/client/src/config/axios.js":"26"},{"size":232,"mtime":1753971917014,"results":"27","hashOfConfig":"28"},{"size":4419,"mtime":1757678710828,"results":"29","hashOfConfig":"28"},{"size":529,"mtime":1753971727608,"results":"30","hashOfConfig":"28"},{"size":9490,"mtime":1762971114798,"results":"31","hashOfConfig":"28"},{"size":3702,"mtime":1757678710146,"results":"32","hashOfConfig":"28"},{"size":427,"mtime":1753971713895,"results":"33","hashOfConfig":"28"},{"size":9191,"mtime":1753971703072,"results":"34","hashOfConfig":"28"},{"size":5925,"mtime":1761252695660,"results":"35","hashOfConfig":"28"},{"size":12808,"mtime":1762982276495,"results":"36","hashOfConfig":"28"},{"size":6396,"mtime":1753971847084,"results":"37","hashOfConfig":"28"},{"size":3396,"mtime":1753971814477,"results":"38","hashOfConfig":"28"},{"size":5109,"mtime":1762970499448,"results":"39","hashOfConfig":"28"},{"size":64365,"mtime":1762982275273,"results":"40","hashOfConfig":"28"},{"size":13465,"mtime":1753971888658,"results":"41","hashOfConfig":"28"},{"size":5852,"mtime":1762982276174,"results":"42","hashOfConfig":"28"},{"size":7290,"mtime":1762982276496,"results":"43","hashOfConfig":"28"},{"size":6828,"mtime":1762971114797,"results":"44","hashOfConfig":"28"},{"size":1845,"mtime":1762403583382,"results":"45","hashOfConfig":"28"},{"size":3782,"mtime":1762970727817,"results":"46","hashOfConfig":"28"},{"size":7888,"mtime":1762967482199,"results":"47","hashOfConfig":"28"},{"size":7211,"mtime":1762982276767,"results":"48","hashOfConfig":"28"},{"size":596,"mtime":1762968125734,"results":"49","hashOfConfig":"28"},{"size":521,"mtime":1757678710694,"results":"50","hashOfConfig":"28"},{"size":2610,"mtime":1758566775105,"results":"51","hashOfConfig":"28"},{"size":2464,"mtime":1762982276769,"results":"52","hashOfConfig":"28"},{"size":1366,"mtime":1762982275836,"results":"53","hashOfConfig":"28"},{"filePath":"54","messages":"55","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"56"},"1uqy7bv",{"filePath":"57","messages":"58","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"56"},{"filePath":"59","messages":"60","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"56"},{"filePath":"61","messages":"62","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"56"},{"filePath":"63","messages":"64","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"56"},{"filePath":"65","messages":"66","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"56"},{"filePath":"67","messages":"68","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"56"},{"filePath":"69","messages":"70","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"71","usedDeprecatedRules":"56"},{"filePath":"72","messages":"73","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"74"},{"filePath":"75","messages":"76","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"56"},{"filePath":"77","messages":"78","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"56"},{"filePath":"79","messages":"80","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"81","usedDeprecatedRules":"56"},{"filePath":"82","messages":"83","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"84","messages":"85","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"56"},{"filePath":"86","messages":"87","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"88","messages":"89","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"90","messages":"91","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"92","usedDeprecatedRules":"56"},{"filePath":"93","messages":"94","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"56"},{"filePath":"95","messages":"96","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"56"},{"filePath":"97","messages":"98","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"56"},{"filePath":"99","messages":"100","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"101","messages":"102","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"56"},{"filePath":"103","messages":"104","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"56"},{"filePath":"105","messages":"106","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"56"},{"filePath":"107","messages":"108","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"109","messages":"110","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"/home/nafis/Desktop/Wellness-In-Schools/client/src/index.js",[],["111","112"],"/home/nafis/Desktop/Wellness-In-Schools/client/src/App.js",[],"/home/nafis/Desktop/Wellness-In-Schools/client/src/components/AdminRoute.js",[],"/home/nafis/Desktop/Wellness-In-Schools/client/src/pages/Home.js",[],"/home/nafis/Desktop/Wellness-In-Schools/client/src/components/Navbar.js",[],"/home/nafis/Desktop/Wellness-In-Schools/client/src/components/PrivateRoute.js",[],"/home/nafis/Desktop/Wellness-In-Schools/client/src/pages/Register.js",[],"/home/nafis/Desktop/Wellness-In-Schools/client/src/pages/Login.js",["113","114"],"import React, { useState, useEffect } from 'react';\nimport { Link, useNavigate } from 'react-router-dom';\nimport { useAuth } from '../contexts/AuthContext';\nimport { FaSignInAlt, FaEye, FaEyeSlash } from 'react-icons/fa';\n\nconst Login = () => {\n  const [formData, setFormData] = useState({\n    email: '',\n    password: ''\n  });\n  const [showPassword, setShowPassword] = useState(false);\n  const [errors, setErrors] = useState({});\n  const [isSubmitting, setIsSubmitting] = useState(false);\n\n  const { login, error, clearError, isAuthenticated, passwordVerified, loading } = useAuth();\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    if (isAuthenticated) {\n      navigate('/');\n    }\n  }, [isAuthenticated, navigate]);\n\n  // Clear error when component mounts\n  useEffect(() => {\n    clearError();\n  }, []);\n\n  const handleChange = (e) => {\n    setFormData({\n      ...formData,\n      [e.target.name]: e.target.value\n    });\n    // Clear field error when user starts typing\n    if (errors[e.target.name]) {\n      setErrors({\n        ...errors,\n        [e.target.name]: ''\n      });\n    }\n    // Clear auth error when user starts typing\n    if (error) {\n      clearError();\n    }\n  };\n\n  const validateForm = () => {\n    const newErrors = {};\n\n    if (!formData.email) {\n      newErrors.email = 'Email is required';\n    } else if (!/\\S+@\\S+\\.\\S+/.test(formData.email)) {\n      newErrors.email = 'Email is invalid';\n    }\n\n    if (!formData.password) {\n      newErrors.password = 'Password is required';\n    }\n\n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    \n    if (!validateForm()) {\n      return;\n    }\n\n    setIsSubmitting(true);\n    clearError(); // Clear any previous errors\n    \n    const result = await login(formData.email, formData.password);\n    setIsSubmitting(false);\n    \n    if (result.success) {\n      navigate('/');\n    }\n    // Error will be displayed from the AuthContext error state\n  };\n\n  return (\n    <div className=\"fade-in\">\n      <div className=\"form-container\">\n        <div style={{ textAlign: 'center', marginBottom: '2rem' }}>\n          <FaSignInAlt style={{ fontSize: '3rem', color: '#FF6B35', marginBottom: '1rem' }} />\n          <h2>Login to Your Account</h2>\n          <p style={{ color: 'rgba(255, 255, 255, 0.7)' }}>\n            Welcome back! Please sign in to continue.\n          </p>\n        </div>\n\n        {error && (\n          <div className=\"error\" style={{\n            background: 'rgba(231, 76, 60, 0.2)',\n            border: '1px solid rgba(231, 76, 60, 0.5)',\n            borderRadius: '10px',\n            padding: '1rem',\n            marginBottom: '1.5rem',\n            color: '#ff6b6b',\n            textAlign: 'center',\n            fontSize: '0.9rem'\n          }}>\n            {error}\n          </div>\n        )}\n\n        <form onSubmit={handleSubmit}>\n          <div className=\"form-group\">\n            <label className=\"form-label\">Email Address</label>\n            <input\n              type=\"email\"\n              name=\"email\"\n              value={formData.email}\n              onChange={handleChange}\n              className={`form-input ${errors.email ? 'error' : ''}`}\n              placeholder=\"Enter your email\"\n            />\n            {errors.email && (\n              <div style={{ color: '#ff6b6b', fontSize: '0.9rem', marginTop: '0.5rem' }}>\n                {errors.email}\n              </div>\n            )}\n          </div>\n\n          <div className=\"form-group\">\n            <label className=\"form-label\">Password</label>\n            <div style={{ position: 'relative' }}>\n              <input\n                type={showPassword ? 'text' : 'password'}\n                name=\"password\"\n                value={formData.password}\n                onChange={handleChange}\n                className={`form-input ${errors.password ? 'error' : ''}`}\n                placeholder=\"Enter your password\"\n              />\n              <button\n                type=\"button\"\n                onClick={() => setShowPassword(!showPassword)}\n                style={{\n                  position: 'absolute',\n                  right: '12px',\n                  top: '50%',\n                  transform: 'translateY(-50%)',\n                  background: 'none',\n                  border: 'none',\n                  color: 'rgba(255, 255, 255, 0.6)',\n                  cursor: 'pointer'\n                }}\n              >\n                {showPassword ? <FaEyeSlash /> : <FaEye />}\n              </button>\n            </div>\n            {errors.password && (\n              <div style={{ color: '#ff6b6b', fontSize: '0.9rem', marginTop: '0.5rem' }}>\n                {errors.password}\n              </div>\n            )}\n          </div>\n\n          <button \n            type=\"submit\" \n            className=\"btn btn-primary\" \n            style={{ width: '100%', marginBottom: '1rem' }}\n            disabled={isSubmitting || loading}\n          >\n            {isSubmitting || loading ? 'Signing In...' : 'Sign In'}\n          </button>\n        </form>\n\n        <div style={{ textAlign: 'center', marginTop: '1rem' }}>\n          <Link \n            to=\"/forgot-password\" \n            style={{ \n              color: '#4ECDC4', \n              textDecoration: 'none',\n              fontSize: '0.9rem'\n            }}\n          >\n            Forgot your password?\n          </Link>\n        </div>\n\n        <div style={{ \n          textAlign: 'center', \n          marginTop: '2rem', \n          paddingTop: '1rem', \n          borderTop: '1px solid rgba(255, 255, 255, 0.2)' \n        }}>\n          <p style={{ color: 'rgba(255, 255, 255, 0.7)', marginBottom: '1rem' }}>\n            Don't have an account?\n          </p>\n          <Link to=\"/register\" className=\"btn btn-secondary\">\n            Create Account\n          </Link>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Login; ","/home/nafis/Desktop/Wellness-In-Schools/client/src/contexts/VideoContext.js",["115"],"import React, { createContext, useContext, useReducer, useEffect, useCallback } from 'react';\nimport axiosInstance from '../config/axios';\n\nconst VideoContext = createContext();\n\nconst initialState = {\n  videos: [],\n  categories: [],\n  featuredVideos: [],\n  currentCategory: 'featured',\n  loading: false,\n  error: null,\n  leaderboard: [],\n  currentVideo: null,\n  previousState: null // Store previous state (category, subcategory, searchQuery)\n};\n\nconst videoReducer = (state, action) => {\n  switch (action.type) {\n    case 'SET_LOADING':\n      return {\n        ...state,\n        loading: action.payload\n      };\n    case 'SET_ERROR':\n      return {\n        ...state,\n        error: action.payload,\n        loading: false\n      };\n    case 'SET_CATEGORIES':\n      return {\n        ...state,\n        categories: action.payload\n      };\n    case 'SET_VIDEOS':\n      return {\n        ...state,\n        videos: action.payload,\n        loading: false,\n        error: null\n      };\n    case 'SET_FEATURED_VIDEOS':\n      return {\n        ...state,\n        featuredVideos: action.payload\n      };\n    case 'SET_CURRENT_CATEGORY':\n      return {\n        ...state,\n        currentCategory: action.payload\n      };\n    case 'SET_LEADERBOARD':\n      return {\n        ...state,\n        leaderboard: action.payload\n      };\n    case 'SET_CURRENT_VIDEO':\n      return {\n        ...state,\n        currentVideo: action.payload\n      };\n    case 'TRACK_VIDEO_VIEW':\n      return {\n        ...state,\n        videos: state.videos.map(video =>\n          video._id === action.payload\n            ? { ...video, viewCount: video.viewCount + 1 }\n            : video\n        )\n      };\n    case 'CLEAR_ERROR':\n      return {\n        ...state,\n        error: null\n      };\n    case 'SAVE_PREVIOUS_STATE':\n      return {\n        ...state,\n        previousState: action.payload\n      };\n    case 'RESTORE_PREVIOUS_STATE':\n      return {\n        ...state,\n        previousState: null\n      };\n    default:\n      return state;\n  }\n};\n\n// Retry utility for handling rate limiting\nconst retryRequest = async (requestFn, maxRetries = 3, delay = 1000) => {\n  for (let i = 0; i < maxRetries; i++) {\n    try {\n      return await requestFn();\n    } catch (error) {\n      if (error.response?.status === 429 && i < maxRetries - 1) {\n        // Wait with exponential backoff\n        await new Promise(resolve => setTimeout(resolve, delay * Math.pow(2, i)));\n        continue;\n      }\n      throw error;\n    }\n  }\n};\n\nexport const VideoProvider = ({ children }) => {\n  const [state, dispatch] = useReducer(videoReducer, initialState);\n\n  // Load categories\n  const loadCategories = useCallback(async () => {\n    try {\n      const res = await axiosInstance.get('/api/videos/categories');\n      dispatch({ type: 'SET_CATEGORIES', payload: res.data });\n    } catch (error) {\n      console.error('Error loading categories:', error);\n    }\n  }, []);\n\n  // Load featured videos\n  const loadFeaturedVideos = useCallback(async () => {\n    dispatch({ type: 'SET_LOADING', payload: true });\n    try {\n      const res = await retryRequest(() => axiosInstance.get('/api/videos/featured'));\n      dispatch({ type: 'SET_FEATURED_VIDEOS', payload: res.data });\n      dispatch({ type: 'SET_CURRENT_CATEGORY', payload: 'featured' });\n      dispatch({ type: 'SET_LOADING', payload: false });\n    } catch (error) {\n      console.error('Error loading featured videos:', error);\n      dispatch({ type: 'SET_LOADING', payload: false });\n      \n      // Handle rate limiting error specifically\n      if (error.response?.status === 429) {\n        dispatch({ type: 'SET_ERROR', payload: 'Too many requests. Please wait a moment and refresh the page.' });\n      } else {\n        dispatch({ type: 'SET_ERROR', payload: 'Failed to load videos. Please try again.' });\n      }\n      \n      // Set empty array to prevent infinite loading\n      dispatch({ type: 'SET_FEATURED_VIDEOS', payload: [] });\n    }\n  }, []);\n\n  // Load leaderboard\n  const loadLeaderboard = useCallback(async () => {\n    try {\n      const res = await axiosInstance.get('/api/videos/leaderboard/top?limit=10');\n      dispatch({ type: 'SET_LEADERBOARD', payload: res.data });\n    } catch (error) {\n      console.error('Error loading leaderboard:', error);\n    }\n  }, []);\n\n  // Load categories on mount\n  useEffect(() => {\n    loadCategories();\n    loadFeaturedVideos();\n    loadLeaderboard();\n  }, [loadCategories, loadFeaturedVideos]);\n\n  // Load videos by category\n  const loadVideosByCategory = async (category) => {\n    dispatch({ type: 'SET_LOADING', payload: true });\n    try {\n      const res = await retryRequest(() => axiosInstance.get(`/api/videos/category/${category}`));\n      dispatch({ type: 'SET_VIDEOS', payload: res.data });\n      dispatch({ type: 'SET_CURRENT_CATEGORY', payload: category });\n      dispatch({ type: 'SET_LOADING', payload: false });\n    } catch (error) {\n      let message = 'Failed to load videos';\n      \n      if (error.response?.status === 429) {\n        message = 'Too many requests. Please wait a moment and refresh the page.';\n      } else if (error.response?.data?.message) {\n        message = error.response.data.message;\n      }\n      \n      dispatch({ type: 'SET_ERROR', payload: message });\n      dispatch({ type: 'SET_LOADING', payload: false });\n      // Set empty array to prevent infinite loading\n      dispatch({ type: 'SET_VIDEOS', payload: [] });\n    }\n  };\n\n  // Load videos by category and subcategory with duration filtering\n  const loadVideosByCategoryAndSubcategory = async (category, subcategoryWithDuration) => {\n    dispatch({ type: 'SET_LOADING', payload: true });\n    try {\n      // Parse subcategory and duration from the combined string (e.g., \"pre-k-2-5min\")\n      const lastDashIndex = subcategoryWithDuration.lastIndexOf('-');\n      const subcategory = subcategoryWithDuration.substring(0, lastDashIndex);\n      const durationStr = subcategoryWithDuration.substring(lastDashIndex + 1);\n      const duration = parseInt(durationStr.replace('min', ''));\n      \n      // Get all videos for the category first\n      const res = await axiosInstance.get(`/api/videos/category/${category}`);\n      let videos = res.data;\n      \n      // Filter by subcategory\n      if (subcategory) {\n        videos = videos.filter(video => video.subcategory === subcategory);\n      }\n      \n      // Filter by duration (within 1 minute tolerance)\n      if (duration) {\n        videos = videos.filter(video => {\n          if (!video.duration) {\n            // If no duration is set, assume it's a 5-minute video for now\n            // This is a temporary fallback until all videos have duration values\n            return duration === 5;\n          }\n          const videoDurationMinutes = video.duration / 60;\n          return Math.abs(videoDurationMinutes - duration) <= 1; // 1 minute tolerance\n        });\n      }\n      \n      dispatch({ type: 'SET_VIDEOS', payload: videos });\n      dispatch({ type: 'SET_CURRENT_CATEGORY', payload: category });\n      dispatch({ type: 'SET_LOADING', payload: false });\n    } catch (error) {\n      const message = error.response?.data?.message || 'Failed to load videos';\n      dispatch({ type: 'SET_ERROR', payload: message });\n      dispatch({ type: 'SET_LOADING', payload: false });\n      // Set empty array to prevent infinite loading\n      dispatch({ type: 'SET_VIDEOS', payload: [] });\n    }\n  };\n\n  // Get single video\n  const getVideo = async (id) => {\n    dispatch({ type: 'SET_LOADING', payload: true });\n    try {\n      const res = await axiosInstance.get(`/api/videos/${id}`);\n      dispatch({ type: 'SET_CURRENT_VIDEO', payload: res.data });\n      dispatch({ type: 'SET_LOADING', payload: false });\n      return res.data;\n    } catch (error) {\n      const message = error.response?.data?.message || 'Failed to load video';\n      dispatch({ type: 'SET_ERROR', payload: message });\n      return null;\n    }\n  };\n\n  // Track video view\n  const trackVideoView = async (videoId) => {\n    try {\n      await axiosInstance.post(`/api/videos/${videoId}/view`);\n      dispatch({ type: 'TRACK_VIDEO_VIEW', payload: videoId });\n      \n      // Reload leaderboard after view\n      await loadLeaderboard();\n    } catch (error) {\n      console.error('Error tracking video view:', error);\n    }\n  };\n\n  // Search videos\n  const searchVideos = async (query) => {\n    if (!query.trim()) {\n      return;\n    }\n    \n    dispatch({ type: 'SET_LOADING', payload: true });\n    try {\n      const res = await retryRequest(() => axiosInstance.get(`/api/videos/search/${encodeURIComponent(query)}`));\n      dispatch({ type: 'SET_VIDEOS', payload: res.data });\n      dispatch({ type: 'SET_CURRENT_CATEGORY', payload: 'search' });\n      dispatch({ type: 'SET_LOADING', payload: false });\n    } catch (error) {\n      const message = error.response?.data?.message || 'Search failed';\n      dispatch({ type: 'SET_ERROR', payload: message });\n      dispatch({ type: 'SET_LOADING', payload: false });\n    }\n  };\n\n  // Load saved videos\n  const loadSavedVideos = async () => {\n    dispatch({ type: 'SET_LOADING', payload: true });\n    try {\n      const res = await axiosInstance.get('/api/users/saved-videos');\n      dispatch({ type: 'SET_VIDEOS', payload: res.data });\n      dispatch({ type: 'SET_CURRENT_CATEGORY', payload: 'saved' });\n      dispatch({ type: 'SET_LOADING', payload: false });\n    } catch (error) {\n      let message = 'Failed to load saved videos';\n      \n      if (error.response?.status === 401) {\n        message = 'Please log in to view saved videos';\n      } else if (error.response?.status === 429) {\n        message = 'Too many requests. Please wait a moment and refresh the page.';\n      } else if (error.response?.data?.message) {\n        message = error.response.data.message;\n      }\n      \n      dispatch({ type: 'SET_ERROR', payload: message });\n      dispatch({ type: 'SET_LOADING', payload: false });\n      // Set empty array to prevent infinite loading\n      dispatch({ type: 'SET_VIDEOS', payload: [] });\n    }\n  };\n\n  // Clear error\n  const clearError = () => {\n    dispatch({ type: 'CLEAR_ERROR' });\n  };\n\n  // Save previous state before navigating to video\n  const savePreviousState = (stateData) => {\n    dispatch({ type: 'SAVE_PREVIOUS_STATE', payload: stateData });\n  };\n\n  // Clear previous state (called by Home component after reading it)\n  const clearPreviousState = () => {\n    dispatch({ type: 'RESTORE_PREVIOUS_STATE' });\n  };\n\n  // Restore previous state\n  const restorePreviousState = async () => {\n    const prevState = state.previousState;\n    if (!prevState) {\n      // If no previous state, go to featured\n      await loadFeaturedVideos();\n      return;\n    }\n\n    // Restore based on state type (don't clear previousState yet - let Home component read it)\n    try {\n      if (prevState.searchQuery) {\n        await searchVideos(prevState.searchQuery);\n      } else if (prevState.subcategory && prevState.category) {\n        await loadVideosByCategoryAndSubcategory(prevState.category, prevState.subcategory);\n      } else if (prevState.category === 'saved') {\n        await loadSavedVideos();\n      } else if (prevState.category === 'featured') {\n        await loadFeaturedVideos();\n      } else if (prevState.category) {\n        await loadVideosByCategory(prevState.category);\n      } else {\n        await loadFeaturedVideos();\n      }\n    } catch (error) {\n      console.error('Error restoring previous state:', error);\n      // Fallback to featured videos if restoration fails\n      await loadFeaturedVideos();\n    }\n    \n    // Note: previousState will be cleared by Home component after reading it\n  };\n\n  // Get current videos based on category\n  const getCurrentVideos = () => {\n    if (state.currentCategory === 'featured') {\n      return state.featuredVideos;\n    }\n    if (state.currentCategory === 'saved') {\n      return state.videos;\n    }\n    return state.videos;\n  };\n\n  const value = {\n    videos: getCurrentVideos(),\n    categories: state.categories,\n    featuredVideos: state.featuredVideos,\n    currentCategory: state.currentCategory,\n    loading: state.loading,\n    error: state.error,\n    leaderboard: state.leaderboard,\n    currentVideo: state.currentVideo,\n    previousState: state.previousState,\n    loadVideosByCategory,\n    loadVideosByCategoryAndSubcategory,\n    loadFeaturedVideos,\n    loadSavedVideos,\n    loadLeaderboard,\n    getVideo,\n    trackVideoView,\n    searchVideos,\n    clearError,\n    savePreviousState,\n    restorePreviousState,\n    clearPreviousState\n  };\n\n  return (\n    <VideoContext.Provider value={value}>\n      {children}\n    </VideoContext.Provider>\n  );\n};\n\nexport const useVideo = () => {\n  const context = useContext(VideoContext);\n  if (!context) {\n    throw new Error('useVideo must be used within a VideoProvider');\n  }\n  return context;\n}; ","/home/nafis/Desktop/Wellness-In-Schools/client/src/pages/ResetPassword.js",[],"/home/nafis/Desktop/Wellness-In-Schools/client/src/pages/ForgotPassword.js",[],"/home/nafis/Desktop/Wellness-In-Schools/client/src/pages/VideoPlayer.js",["116","117"],"import React, { useEffect } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { useVideo } from '../contexts/VideoContext';\nimport { useAuth } from '../contexts/AuthContext';\nimport { FaArrowLeft } from 'react-icons/fa';\n\nconst VideoPlayer = () => {\n  const { id } = useParams();\n  const navigate = useNavigate();\n  const { currentVideo, getVideo, trackVideoView, videos, restorePreviousState } = useVideo();\n  const { isAuthenticated, user } = useAuth();\n\n  useEffect(() => {\n    const loadVideo = async () => {\n      const video = await getVideo(id);\n      if (video && isAuthenticated) {\n        try {\n          await trackVideoView(id);\n        } catch (error) {\n          console.error('Error tracking video view:', error);\n        }\n      }\n    };\n    loadVideo();\n  }, [id, isAuthenticated]);\n\n  const handleClose = async () => {\n    // Restore previous state before navigating back\n    await restorePreviousState();\n    // Navigate with state to indicate we're restoring\n    navigate('/', { state: { restoring: true } });\n  };\n\n  const getEmbedUrl = (driveUrl) => {\n    const fileId = driveUrl.match(/\\/d\\/(.+?)(\\/|$)/)?.[1];\n    if (fileId) {\n      return `https://drive.google.com/file/d/${fileId}/preview`;\n    }\n    return driveUrl;\n  };\n\n  if (!currentVideo) {\n    return (\n      <div className=\"loading\">\n        Loading video...\n      </div>\n    );\n  }\n\n  return (\n    <div style={{ \n      position: 'fixed',\n      top: 0,\n      left: 0,\n      right: 0,\n      bottom: 0,\n      width: '100vw',\n      height: '100vh',\n      backgroundColor: '#000',\n      zIndex: 1000,\n      overflow: 'auto'\n    }}>\n      {/* Back Button */}\n      <button\n        onClick={handleClose}\n        style={{\n          position: 'absolute',\n          top: '1rem',\n          left: '1rem',\n          background: 'rgba(0, 0, 0, 0.7)',\n          border: 'none',\n          borderRadius: '8px',\n          padding: '0.75rem 1rem',\n          color: 'white',\n          cursor: 'pointer',\n          display: 'flex',\n          alignItems: 'center',\n          gap: '0.5rem',\n          zIndex: 1001,\n          fontSize: '1rem',\n          fontWeight: '600',\n          transition: 'all 0.3s ease'\n        }}\n        onMouseEnter={(e) => {\n          e.currentTarget.style.background = 'rgba(0, 0, 0, 0.9)';\n        }}\n        onMouseLeave={(e) => {\n          e.currentTarget.style.background = 'rgba(0, 0, 0, 0.7)';\n        }}\n      >\n        <FaArrowLeft /> Back\n      </button>\n\n\n      {/* Video Content - Full Screen */}\n      <div style={{ \n        width: '100%',\n        height: '100vh',\n        display: 'flex',\n        flexDirection: 'column',\n        justifyContent: 'center',\n        alignItems: 'center',\n        padding: '2rem'\n      }}>\n        {/* Video Player - Full Screen */}\n        <div style={{ \n          position: 'relative', \n          width: '100%', \n          maxWidth: '100%',\n          height: 'calc(100vh - 200px)',\n          minHeight: '500px',\n          background: '#000',\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'center'\n        }}>\n          <iframe\n            src={getEmbedUrl(currentVideo.googleDriveUrl)}\n            width=\"100%\"\n            height=\"100%\"\n            frameBorder=\"0\"\n            allowFullScreen\n            allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\n            title={currentVideo.title}\n            style={{\n              border: 'none'\n            }}\n          />\n        </div>\n\n        {/* Video Info - Below Video */}\n        <div style={{ \n          width: '100%',\n          maxWidth: '1200px',\n          marginTop: '2rem',\n          padding: '0 2rem',\n          color: 'white'\n        }}>\n          <h1 style={{ \n            marginBottom: '1rem', \n            color: 'white',\n            fontSize: '1.5rem',\n            fontWeight: '600'\n          }}>\n            {currentVideo.title}\n          </h1>\n          \n          <div style={{ \n            display: 'flex', \n            flexWrap: 'wrap', \n            gap: '1.5rem', \n            fontSize: '0.95rem',\n            marginBottom: '1rem',\n            color: 'rgba(255, 255, 255, 0.8)'\n          }}>\n            {currentVideo.instructor && (\n              <span>\n                <strong>Instructor:</strong> {currentVideo.instructor}\n              </span>\n            )}\n            {currentVideo.duration && (\n              <span>\n                <strong>Duration:</strong> {Math.round(currentVideo.duration / 60)} minutes\n              </span>\n            )}\n            {user?.role === 'admin' && (\n              <span>\n                <strong>Views:</strong> {currentVideo.viewCount || 0}\n              </span>\n            )}\n          </div>\n\n          {currentVideo.description && (\n            <p style={{ \n              lineHeight: '1.6',\n              color: 'rgba(255, 255, 255, 0.9)',\n              marginTop: '1rem'\n            }}>\n              {currentVideo.description}\n            </p>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default VideoPlayer; ","/home/nafis/Desktop/Wellness-In-Schools/client/src/pages/AdminDashboard.js",["118"],"/home/nafis/Desktop/Wellness-In-Schools/client/src/pages/Profile.js",[],"/home/nafis/Desktop/Wellness-In-Schools/client/src/contexts/AuthContext.js",[],"/home/nafis/Desktop/Wellness-In-Schools/client/src/components/VideoCard.js",[],"/home/nafis/Desktop/Wellness-In-Schools/client/src/components/CategoryTabs.js",["119","120"],"import React, { useState, useRef, useEffect } from 'react';\nimport SubcategoryTabs from './SubcategoryTabs';\n\nconst CategoryTabs = ({ categories, currentCategory, onCategoryChange, activeSubcategory, onSubcategoryChange }) => {\n  const [showSubcategories, setShowSubcategories] = useState(null);\n  const hoverTimeoutRef = useRef(null);\n  const getCategoryColor = (categoryId) => {\n    const category = categories.find(cat => cat.id === categoryId);\n    return category?.color || '#FF6B35';\n  };\n\n  const getCategoryName = (categoryId) => {\n    const category = categories.find(cat => cat.id === categoryId);\n    return category?.name || categoryId;\n  };\n\n  const handleCategoryClick = (categoryId) => {\n    onCategoryChange(categoryId);\n  };\n\n  const handleCategoryHover = (categoryId) => {\n    // Clear any existing timeout\n    if (hoverTimeoutRef.current) {\n      clearTimeout(hoverTimeoutRef.current);\n    }\n    setShowSubcategories(categoryId);\n  };\n\n  const handleCategoryLeave = () => {\n    // Add a small delay before hiding to allow moving to subcategory dropdown\n    hoverTimeoutRef.current = setTimeout(() => {\n      setShowSubcategories(null);\n    }, 150);\n  };\n\n  // Cleanup timeout on unmount\n  useEffect(() => {\n    return () => {\n      if (hoverTimeoutRef.current) {\n        clearTimeout(hoverTimeoutRef.current);\n      }\n    };\n  }, []);\n\n  return (\n    <div className=\"category-tabs\">\n      {/* Featured tab */}\n      <button\n        className={`category-tab ${currentCategory === 'featured' ? 'active' : ''}`}\n        style={{\n          background: currentCategory === 'featured' \n            ? 'linear-gradient(45deg, #FF6B35, #f7981e)' \n            : 'linear-gradient(45deg, #FF6B35, #f7981e)',\n          border: currentCategory === 'featured' ? 'none' : '1px solid #FF6B35',\n          color: 'white',\n          transition: 'all 0.3s ease'\n        }}\n        onMouseEnter={(e) => {\n          if (currentCategory !== 'featured') {\n            e.target.style.background = 'linear-gradient(45deg, #FF6B35, #f7981e)';\n            e.target.style.borderColor = '#FF6B35';\n            e.target.style.transform = 'translateY(-2px)';\n            e.target.style.boxShadow = '0 4px 15px #FF6B3540';\n          }\n        }}\n        onMouseLeave={(e) => {\n          if (currentCategory !== 'featured') {\n            e.target.style.background = 'linear-gradient(45deg, #FF6B35, #f7981e)';\n            e.target.style.borderColor = '#FF6B35';\n            e.target.style.transform = 'translateY(0)';\n            e.target.style.boxShadow = 'none';\n          }\n        }}\n        onClick={() => handleCategoryClick('featured')}\n      >\n        Featured Videos\n      </button>\n\n      {/* Category tabs */}\n      {categories.map((category) => (\n        <div \n          key={category.id} \n          style={{ position: 'relative' }}\n          onMouseEnter={() => handleCategoryHover(category.id)}\n          onMouseLeave={handleCategoryLeave}\n        >\n          <button\n            className={`category-tab ${currentCategory === category.id ? 'active' : ''}`}\n            style={{\n              background: currentCategory === category.id \n                ? `linear-gradient(45deg, ${category.color}, ${category.color})` \n                : `linear-gradient(45deg, ${category.color}, ${category.color})`,\n              border: currentCategory === category.id ? 'none' : `1px solid ${category.color}`,\n              position: 'relative',\n              color: currentCategory === category.id ? 'white' : 'white',\n              transition: 'all 0.3s ease'\n            }}\n            onMouseEnter={(e) => {\n              if (currentCategory !== category.id) {\n                e.target.style.background = `linear-gradient(45deg, ${category.color}, ${category.color})`;\n                e.target.style.borderColor = category.color;\n                e.target.style.transform = 'translateY(-2px)';\n                e.target.style.boxShadow = `0 4px 15px ${category.color}40`;\n              }\n            }}\n            onMouseLeave={(e) => {\n              if (currentCategory !== category.id) {\n                e.target.style.background = `linear-gradient(45deg, ${category.color}, ${category.color})`;\n                e.target.style.borderColor = category.color;\n                e.target.style.transform = 'translateY(0)';\n                e.target.style.boxShadow = 'none';\n              }\n            }}\n            onClick={() => handleCategoryClick(category.id)}\n          >\n            {category.name}\n            {/* Dropdown indicator */}\n            <span style={{ \n              marginLeft: '0.5rem', \n              fontSize: '0.8rem',\n              transform: showSubcategories === category.id ? 'rotate(180deg)' : 'rotate(0deg)',\n              transition: 'transform 0.3s ease',\n              display: 'inline-block',\n              color: 'white'\n            }}>\n              â–¼\n            </span>\n          </button>\n          \n          {/* Subcategory dropdown */}\n          {showSubcategories === category.id && (\n            <SubcategoryTabs\n              activeCategory={category.id}\n              activeSubcategory={activeSubcategory}\n              onSubcategoryChange={onSubcategoryChange}\n              currentCategory={currentCategory}\n              onMouseEnter={() => {\n                if (hoverTimeoutRef.current) {\n                  clearTimeout(hoverTimeoutRef.current);\n                }\n              }}\n              onMouseLeave={handleCategoryLeave}\n            />\n          )}\n        </div>\n      ))}\n\n      {/* Saved Videos tab */}\n      <button\n        className={`category-tab ${currentCategory === 'saved' ? 'active' : ''}`}\n        style={{\n          background: currentCategory === 'saved' \n            ? 'linear-gradient(45deg, #28b6ea, #28b6ea)' \n            : 'linear-gradient(45deg, #28b6ea, #28b6ea)',\n          border: currentCategory === 'saved' ? 'none' : '1px solid #28b6ea',\n          color: 'white',\n          transition: 'all 0.3s ease'\n        }}\n        onMouseEnter={(e) => {\n          if (currentCategory !== 'saved') {\n            e.target.style.background = 'linear-gradient(45deg, #28b6ea, #28b6ea)';\n            e.target.style.borderColor = '#28b6ea';\n            e.target.style.transform = 'translateY(-2px)';\n            e.target.style.boxShadow = '0 4px 15px #28b6ea40';\n          }\n        }}\n        onMouseLeave={(e) => {\n          if (currentCategory !== 'saved') {\n            e.target.style.background = 'linear-gradient(45deg, #28b6ea, #28b6ea)';\n            e.target.style.borderColor = '#28b6ea';\n            e.target.style.transform = 'translateY(0)';\n            e.target.style.boxShadow = 'none';\n          }\n        }}\n        onClick={() => handleCategoryClick('saved')}\n      >\n        Saved Videos\n      </button>\n    </div>\n  );\n};\n\nexport default CategoryTabs; ","/home/nafis/Desktop/Wellness-In-Schools/client/src/components/Leaderboard.js",[],"/home/nafis/Desktop/Wellness-In-Schools/client/src/components/SubcategoryTabs.js",[],"/home/nafis/Desktop/Wellness-In-Schools/client/src/components/ChatBubble.js",[],"/home/nafis/Desktop/Wellness-In-Schools/client/src/pages/PasswordProtection.js",[],"/home/nafis/Desktop/Wellness-In-Schools/client/src/components/PasswordRoute.js",[],"/home/nafis/Desktop/Wellness-In-Schools/client/src/components/PasswordOnlyRoute.js",[],"/home/nafis/Desktop/Wellness-In-Schools/client/src/components/HorizontalVideoGrid.js",[],"/home/nafis/Desktop/Wellness-In-Schools/client/src/components/ScrollingBanner.js",[],"/home/nafis/Desktop/Wellness-In-Schools/client/src/config/axios.js",[],{"ruleId":"121","replacedBy":"122"},{"ruleId":"123","replacedBy":"124"},{"ruleId":"125","severity":1,"message":"126","line":15,"column":54,"nodeType":"127","messageId":"128","endLine":15,"endColumn":70},{"ruleId":"129","severity":1,"message":"130","line":27,"column":6,"nodeType":"131","endLine":27,"endColumn":8,"suggestions":"132"},{"ruleId":"129","severity":1,"message":"133","line":160,"column":6,"nodeType":"131","endLine":160,"endColumn":42,"suggestions":"134"},{"ruleId":"125","severity":1,"message":"135","line":10,"column":51,"nodeType":"127","messageId":"128","endLine":10,"endColumn":57},{"ruleId":"129","severity":1,"message":"136","line":25,"column":6,"nodeType":"131","endLine":25,"endColumn":27,"suggestions":"137"},{"ruleId":"125","severity":1,"message":"138","line":49,"column":10,"nodeType":"127","messageId":"128","endLine":49,"endColumn":28},{"ruleId":"125","severity":1,"message":"139","line":7,"column":9,"nodeType":"127","messageId":"128","endLine":7,"endColumn":25},{"ruleId":"125","severity":1,"message":"140","line":12,"column":9,"nodeType":"127","messageId":"128","endLine":12,"endColumn":24},"no-native-reassign",["141"],"no-negated-in-lhs",["142"],"no-unused-vars","'passwordVerified' is assigned a value but never used.","Identifier","unusedVar","react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'clearError'. Either include it or remove the dependency array.","ArrayExpression",["143"],"React Hook useEffect has a missing dependency: 'loadLeaderboard'. Either include it or remove the dependency array.",["144"],"'videos' is assigned a value but never used.","React Hook useEffect has missing dependencies: 'getVideo' and 'trackVideoView'. Either include them or remove the dependency array.",["145"],"'uploadingThumbnail' is assigned a value but never used.","'getCategoryColor' is assigned a value but never used.","'getCategoryName' is assigned a value but never used.","no-global-assign","no-unsafe-negation",{"desc":"146","fix":"147"},{"desc":"148","fix":"149"},{"desc":"150","fix":"151"},"Update the dependencies array to be: [clearError]",{"range":"152","text":"153"},"Update the dependencies array to be: [loadCategories, loadFeaturedVideos, loadLeaderboard]",{"range":"154","text":"155"},"Update the dependencies array to be: [getVideo, id, isAuthenticated, trackVideoView]",{"range":"156","text":"157"},[812,814],"[clearError]",[4398,4434],"[loadCategories, loadFeaturedVideos, loadLeaderboard]",[806,827],"[getVideo, id, isAuthenticated, trackVideoView]"]