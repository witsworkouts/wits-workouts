{"ast":null,"code":"var _jsxFileName = \"/home/nafis/Desktop/wits-workouts/client/src/components/PasswordRoute.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { Navigate } from 'react-router-dom';\nimport { useAuth } from '../contexts/AuthContext';\nimport axiosInstance from '../config/axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst PasswordRoute = ({\n  children\n}) => {\n  _s();\n  const {\n    passwordVerified\n  } = useAuth();\n  const [checking, setChecking] = useState(true);\n  const [protectionEnabled, setProtectionEnabled] = useState(true);\n\n  // Check with server if password protection is enabled\n  useEffect(() => {\n    const checkProtectionStatus = async () => {\n      try {\n        const res = await axiosInstance.get('/api/site-settings/protection-status');\n        setProtectionEnabled(res.data.isActive);\n\n        // If protection is disabled, auto-verify\n        if (!res.data.isActive) {\n          // Protection is disabled, allow access\n          setChecking(false);\n        } else {\n          // Protection is enabled, check if password is verified\n          setChecking(false);\n        }\n      } catch (error) {\n        console.error('Error checking protection status:', error);\n        // On error, assume protection is enabled for security\n        setProtectionEnabled(true);\n        setChecking(false);\n      }\n    };\n    checkProtectionStatus();\n  }, []);\n\n  // Show loading while checking\n  if (checking) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        minHeight: '100vh',\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n        padding: '2rem'\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          background: 'rgba(255, 255, 255, 0.95)',\n          backdropFilter: 'blur(10px)',\n          borderRadius: '20px',\n          padding: '3rem',\n          textAlign: 'center'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            color: '#333',\n            fontSize: '1.1rem'\n          },\n          children: \"Loading...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 7\n    }, this);\n  }\n\n  // If protection is disabled, allow access\n  if (!protectionEnabled) {\n    return children;\n  }\n\n  // If protection is enabled but password is not verified, redirect to password protection page\n  if (!passwordVerified) {\n    return /*#__PURE__*/_jsxDEV(Navigate, {\n      to: \"/password-protection\",\n      replace: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 12\n    }, this);\n  }\n\n  // If password is verified, render the children\n  return children;\n};\n_s(PasswordRoute, \"5keFYZCNFB0oQvvIYZOR08NWwJI=\", false, function () {\n  return [useAuth];\n});\n_c = PasswordRoute;\nexport default PasswordRoute;\nvar _c;\n$RefreshReg$(_c, \"PasswordRoute\");","map":{"version":3,"names":["React","useState","useEffect","Navigate","useAuth","axiosInstance","jsxDEV","_jsxDEV","PasswordRoute","children","_s","passwordVerified","checking","setChecking","protectionEnabled","setProtectionEnabled","checkProtectionStatus","res","get","data","isActive","error","console","style","minHeight","display","alignItems","justifyContent","padding","background","backdropFilter","borderRadius","textAlign","color","fontSize","fileName","_jsxFileName","lineNumber","columnNumber","to","replace","_c","$RefreshReg$"],"sources":["/home/nafis/Desktop/wits-workouts/client/src/components/PasswordRoute.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Navigate } from 'react-router-dom';\nimport { useAuth } from '../contexts/AuthContext';\nimport axiosInstance from '../config/axios';\n\nconst PasswordRoute = ({ children }) => {\n  const { passwordVerified } = useAuth();\n  const [checking, setChecking] = useState(true);\n  const [protectionEnabled, setProtectionEnabled] = useState(true);\n\n  // Check with server if password protection is enabled\n  useEffect(() => {\n    const checkProtectionStatus = async () => {\n      try {\n        const res = await axiosInstance.get('/api/site-settings/protection-status');\n        setProtectionEnabled(res.data.isActive);\n        \n        // If protection is disabled, auto-verify\n        if (!res.data.isActive) {\n          // Protection is disabled, allow access\n          setChecking(false);\n        } else {\n          // Protection is enabled, check if password is verified\n          setChecking(false);\n        }\n      } catch (error) {\n        console.error('Error checking protection status:', error);\n        // On error, assume protection is enabled for security\n        setProtectionEnabled(true);\n        setChecking(false);\n      }\n    };\n\n    checkProtectionStatus();\n  }, []);\n\n  // Show loading while checking\n  if (checking) {\n    return (\n      <div style={{\n        minHeight: '100vh',\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n        padding: '2rem'\n      }}>\n        <div style={{\n          background: 'rgba(255, 255, 255, 0.95)',\n          backdropFilter: 'blur(10px)',\n          borderRadius: '20px',\n          padding: '3rem',\n          textAlign: 'center'\n        }}>\n          <p style={{ color: '#333', fontSize: '1.1rem' }}>Loading...</p>\n        </div>\n      </div>\n    );\n  }\n\n  // If protection is disabled, allow access\n  if (!protectionEnabled) {\n    return children;\n  }\n\n  // If protection is enabled but password is not verified, redirect to password protection page\n  if (!passwordVerified) {\n    return <Navigate to=\"/password-protection\" replace />;\n  }\n\n  // If password is verified, render the children\n  return children;\n};\n\nexport default PasswordRoute;\n\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAClD,SAASC,QAAQ,QAAQ,kBAAkB;AAC3C,SAASC,OAAO,QAAQ,yBAAyB;AACjD,OAAOC,aAAa,MAAM,iBAAiB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE5C,MAAMC,aAAa,GAAGA,CAAC;EAAEC;AAAS,CAAC,KAAK;EAAAC,EAAA;EACtC,MAAM;IAAEC;EAAiB,CAAC,GAAGP,OAAO,CAAC,CAAC;EACtC,MAAM,CAACQ,QAAQ,EAAEC,WAAW,CAAC,GAAGZ,QAAQ,CAAC,IAAI,CAAC;EAC9C,MAAM,CAACa,iBAAiB,EAAEC,oBAAoB,CAAC,GAAGd,QAAQ,CAAC,IAAI,CAAC;;EAEhE;EACAC,SAAS,CAAC,MAAM;IACd,MAAMc,qBAAqB,GAAG,MAAAA,CAAA,KAAY;MACxC,IAAI;QACF,MAAMC,GAAG,GAAG,MAAMZ,aAAa,CAACa,GAAG,CAAC,sCAAsC,CAAC;QAC3EH,oBAAoB,CAACE,GAAG,CAACE,IAAI,CAACC,QAAQ,CAAC;;QAEvC;QACA,IAAI,CAACH,GAAG,CAACE,IAAI,CAACC,QAAQ,EAAE;UACtB;UACAP,WAAW,CAAC,KAAK,CAAC;QACpB,CAAC,MAAM;UACL;UACAA,WAAW,CAAC,KAAK,CAAC;QACpB;MACF,CAAC,CAAC,OAAOQ,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,mCAAmC,EAAEA,KAAK,CAAC;QACzD;QACAN,oBAAoB,CAAC,IAAI,CAAC;QAC1BF,WAAW,CAAC,KAAK,CAAC;MACpB;IACF,CAAC;IAEDG,qBAAqB,CAAC,CAAC;EACzB,CAAC,EAAE,EAAE,CAAC;;EAEN;EACA,IAAIJ,QAAQ,EAAE;IACZ,oBACEL,OAAA;MAAKgB,KAAK,EAAE;QACVC,SAAS,EAAE,OAAO;QAClBC,OAAO,EAAE,MAAM;QACfC,UAAU,EAAE,QAAQ;QACpBC,cAAc,EAAE,QAAQ;QACxBC,OAAO,EAAE;MACX,CAAE;MAAAnB,QAAA,eACAF,OAAA;QAAKgB,KAAK,EAAE;UACVM,UAAU,EAAE,2BAA2B;UACvCC,cAAc,EAAE,YAAY;UAC5BC,YAAY,EAAE,MAAM;UACpBH,OAAO,EAAE,MAAM;UACfI,SAAS,EAAE;QACb,CAAE;QAAAvB,QAAA,eACAF,OAAA;UAAGgB,KAAK,EAAE;YAAEU,KAAK,EAAE,MAAM;YAAEC,QAAQ,EAAE;UAAS,CAAE;UAAAzB,QAAA,EAAC;QAAU;UAAA0B,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAG;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC5D;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC;EAEV;;EAEA;EACA,IAAI,CAACxB,iBAAiB,EAAE;IACtB,OAAOL,QAAQ;EACjB;;EAEA;EACA,IAAI,CAACE,gBAAgB,EAAE;IACrB,oBAAOJ,OAAA,CAACJ,QAAQ;MAACoC,EAAE,EAAC,sBAAsB;MAACC,OAAO;IAAA;MAAAL,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC;EACvD;;EAEA;EACA,OAAO7B,QAAQ;AACjB,CAAC;AAACC,EAAA,CAlEIF,aAAa;EAAA,QACYJ,OAAO;AAAA;AAAAqC,EAAA,GADhCjC,aAAa;AAoEnB,eAAeA,aAAa;AAAC,IAAAiC,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module"}